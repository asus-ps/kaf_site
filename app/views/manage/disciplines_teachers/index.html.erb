<h1>Преподаватели-дисциплины</h1>



<p>
  <% form_for ([:manage,@newdt]) do |f| %>
    <%= f.error_messages %>
<table>
  <tr>
    <td>Дисциплина</td>
    <td>Преподаватель</td>
  </tr>
  <tr>
    <td><%=h f.select(:discipline_id, options_for_select( Discipline.all.collect { |p| [p.name, p.id]})) %></td>
    <td><%=h f.select(:teacher_id, options_for_select( Teacher.all.collect { |p| ["#{p.person.last_name}  #{p.person.first_name} #{p.person.patronymic_name}, #{p.degree.short_name.empty? ? (p.degree.name) : (p.degree.short_name)}", p.person.id]})) %></td>
    <td><%= f.submit 'Добавить' %></td>
  </tr>
  <tr>
    <td> <%= link_to 'New', manage_disciplines_path %> </td>
    <td> <%= link_to 'New', new_manage_teacher_path %> </td>
  </tr>
</table>
  <% end %>
</p>
<p style="color: red"><%= notice %></p>

<%= render :partial => 'manage/shares/search_form',:locals => { :path => manage_disciplines_teachers_path } %>
<table>
  <tr>
    <th>Предмет</th>
    <th>Ведёт</th>

  </tr>

<% @dts.each do |d| %>
  <tr>
    <td><%=h d.discipline.name %></td>
    <td><%=h "#{d.teacher.person.last_name}  #{d.teacher.person.first_name} #{d.teacher.person.patronymic_name}, #{d.teacher.degree.short_name.empty? ? d.teacher.degree.name : d.teacher.degree.short_name}" %></td>
    <td><%= link_to 'Редактировать', edit_manage_disciplines_teacher_path(d) %></td>
    <td><%= link_to 'Удалить', manage_disciplines_teacher_path(d), :confirm => 'Удалить запись?', :method => :delete %></td>
  </tr>
<% end %>
</table>
