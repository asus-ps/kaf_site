<h1>Diplomas#edit</h1>
<p>Find me in app/views/diplomas/edit.html.erb</p>

<% form_for @diploma do |f| %>
  <%= f.error_messages %>
<table>
  <tr>
    <td>Тема диплома:</td>
    <td><%=h f.text_field :name %></td>
  </tr>

  <tr>
    <td>Год защиты:</td>
    <% i = Time.now.year  %>
    <% k = 0 %>
    <% years = Array.new %>
    <% while k!=30 %>
    <% years[k] = i-k %>
    <% k = k + 1 %>
    <% end %>
    <td><%=h f.select(:protection_year,  years , :prompt => @diploma.protection_year ) %></td>
  </tr>

  <tr>
    <td>Выполнил</td>
    <td><%=h f.select(:student_id, options_for_select( Student.all.collect { |p| ["#{p.person.last_name} #{p.person.first_name} #{p.person.patronymic_name} , #{p.speciality.short_name}", p.person.id]}, selected_value=@diploma.student_id)) %></td>
  </tr>

  <tr>
    <td>Руководитель</td>
    <td><%=h f.select(:teacher_id, options_for_select( Teacher.all.collect { |p| ["#{p.person.last_name} #{p.person.first_name} #{p.person.patronymic_name}, #{p.degree.short_name}", p.person.id]}, selected_value=@diploma.teacher_id)) %></td>
  </tr>

  <tr>
    <td>Аннотация:</td>
      <td><%=h f.text_area :summary %></td>
    </tr>
  <tr>
    <td></td>
    <td align="right"><%= f.submit 'Изменить' %></td>
  </tr>
</table>
<% end %>


